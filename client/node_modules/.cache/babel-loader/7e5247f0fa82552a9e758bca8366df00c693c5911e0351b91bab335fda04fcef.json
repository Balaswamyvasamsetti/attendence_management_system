{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Form,Button,Table}from'react-bootstrap';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";function StudentDashboard(_ref){let{user}=_ref;const[attendance,setAttendance]=useState([]);const[profile,setProfile]=useState(user);const[editMode,setEditMode]=useState(false);const[schedule,setSchedule]=useState([]);useEffect(()=>{const fetchAttendance=async()=>{try{const res=await axios.get(`/api/attendance/${user.studentId}`,{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});setAttendance(res.data);}catch(err){console.error(err);}};const fetchSchedule=async()=>{try{const res=await axios.get('/api/schedule',{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});setSchedule(res.data);}catch(err){console.error(err);}};fetchAttendance();fetchSchedule();},[user.studentId]);const handleUpdateProfile=async e=>{e.preventDefault();try{await axios.put(`/api/users/${user._id}`,profile,{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});setEditMode(false);alert('Profile updated successfully');}catch(err){alert('Failed to update profile');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",profile.name]}),editMode?/*#__PURE__*/_jsxs(Form,{onSubmit:handleUpdateProfile,className:\"profile-form\",children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"form-group\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:profile.name,onChange:e=>setProfile({...profile,name:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"form-group\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:profile.email,onChange:e=>setProfile({...profile,email:e.target.value}),required:true})]}),/*#__PURE__*/_jsx(Button,{className:\"btn-primary\",type:\"submit\",children:\"Save\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setEditMode(false),style:{marginLeft:'1rem'},children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",profile.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Student ID: \",profile.studentId]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Branch: \",profile.branch]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Section: \",profile.section]}),/*#__PURE__*/_jsx(Button,{className:\"btn-primary\",onClick:()=>setEditMode(true),children:\"Edit Profile\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Attendance Records\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:attendance.map(record=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:new Date(record.date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:record.subject}),/*#__PURE__*/_jsx(\"td\",{children:record.status})]},record._id))})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Class Schedule\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Day\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subject\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:schedule.map((classItem,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:classItem.day}),/*#__PURE__*/_jsx(\"td\",{children:classItem.time}),/*#__PURE__*/_jsx(\"td\",{children:classItem.subject})]},index))})]})]});}export default StudentDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","Form","Button","Table","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","StudentDashboard","_ref","user","attendance","setAttendance","profile","setProfile","editMode","setEditMode","schedule","setSchedule","fetchAttendance","res","get","studentId","headers","Authorization","localStorage","getItem","data","err","console","error","fetchSchedule","handleUpdateProfile","e","preventDefault","put","_id","alert","className","children","name","onSubmit","Group","Label","Control","type","value","onChange","target","required","email","variant","onClick","style","marginLeft","branch","section","striped","bordered","hover","map","record","Date","date","toLocaleDateString","subject","status","classItem","index","day","time"],"sources":["C:/lab/2ndsem/frontendlab/project/attendance-system/client/src/components/StudentDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Form, Button, Table } from 'react-bootstrap';\r\n\r\nfunction StudentDashboard({ user }) {\r\n  const [attendance, setAttendance] = useState([]);\r\n  const [profile, setProfile] = useState(user);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [schedule, setSchedule] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchAttendance = async () => {\r\n      try {\r\n        const res = await axios.get(`/api/attendance/${user.studentId}`, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n        setAttendance(res.data);\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    };\r\n    const fetchSchedule = async () => {\r\n      try {\r\n        const res = await axios.get('/api/schedule', {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n        setSchedule(res.data);\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    };\r\n    fetchAttendance();\r\n    fetchSchedule();\r\n  }, [user.studentId]);\r\n\r\n  const handleUpdateProfile = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await axios.put(`/api/users/${user._id}`, profile, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n      });\r\n      setEditMode(false);\r\n      alert('Profile updated successfully');\r\n    } catch (err) {\r\n      alert('Failed to update profile');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard-content\">\r\n      <h2>Welcome, {profile.name}</h2>\r\n      {editMode ? (\r\n        <Form onSubmit={handleUpdateProfile} className=\"profile-form\">\r\n          <Form.Group className=\"form-group\">\r\n            <Form.Label>Name</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={profile.name}\r\n              onChange={(e) => setProfile({ ...profile, name: e.target.value })}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"form-group\">\r\n            <Form.Label>Email</Form.Label>\r\n            <Form.Control\r\n              type=\"email\"\r\n              value={profile.email}\r\n              onChange={(e) => setProfile({ ...profile, email: e.target.value })}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          <Button className=\"btn-primary\" type=\"submit\">Save</Button>\r\n          <Button variant=\"secondary\" onClick={() => setEditMode(false)} style={{ marginLeft: '1rem' }}>Cancel</Button>\r\n        </Form>\r\n      ) : (\r\n        <>\r\n          <p>Email: {profile.email}</p>\r\n          <p>Student ID: {profile.studentId}</p>\r\n          <p>Branch: {profile.branch}</p>\r\n          <p>Section: {profile.section}</p>\r\n          <Button className=\"btn-primary\" onClick={() => setEditMode(true)}>Edit Profile</Button>\r\n        </>\r\n      )}\r\n      <h3>Attendance Records</h3>\r\n      <Table striped bordered hover>\r\n        <thead>\r\n          <tr>\r\n            <th>Date</th>\r\n            <th>Subject</th>\r\n            <th>Status</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {attendance.map((record) => (\r\n            <tr key={record._id}>\r\n              <td>{new Date(record.date).toLocaleDateString()}</td>\r\n              <td>{record.subject}</td>\r\n              <td>{record.status}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </Table>\r\n      <h3>Class Schedule</h3>\r\n      <Table striped bordered hover>\r\n        <thead>\r\n          <tr>\r\n            <th>Day</th>\r\n            <th>Time</th>\r\n            <th>Subject</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {schedule.map((classItem, index) => (\r\n            <tr key={index}>\r\n              <td>{classItem.day}</td>\r\n              <td>{classItem.time}</td>\r\n              <td>{classItem.subject}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StudentDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Card,Table,Button,Modal,Form,Alert}from'react-bootstrap';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function StudentDashboard(_ref){let{user,setUser}=_ref;const[attendance,setAttendance]=useState([]);const[notifications,setNotifications]=useState([]);const[profile,setProfile]=useState({name:user.name,email:user.email});const[showProfileModal,setShowProfileModal]=useState(false);useEffect(()=>{const fetchAttendance=async()=>{try{const res=await axios.get(`http://localhost:5000/api/attendance?studentId=${user.studentId}`);setAttendance(res.data);}catch(err){var _err$response,_err$response$data;addNotification('Failed to fetch attendance: '+(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.msg)||err.message),'error');}};fetchAttendance();},[user.studentId]);const addNotification=function(msg){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'success';setNotifications(prev=>[...prev,{id:Date.now(),msg,type}]);setTimeout(()=>{setNotifications(prev=>prev.filter(n=>n.id!==Date.now()));},5000);};const handleProfileUpdate=async e=>{e.preventDefault();try{const res=await axios.put(`http://localhost:5000/api/users/${user._id}`,profile);const updatedUser={...user,name:profile.name,email:profile.email};localStorage.setItem('user',JSON.stringify(updatedUser));setUser(updatedUser);setShowProfileModal(false);addNotification('Profile updated successfully!');}catch(err){var _err$response2,_err$response2$data;addNotification('Failed to update profile: '+(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.msg)||err.message),'error');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Student ID:\"}),\" \",user.studentId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Section:\"}),\" \",user.section]}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",className:\"mb-3\",onClick:()=>setShowProfileModal(true),children:\"Edit Profile\"}),notifications.map(notif=>/*#__PURE__*/_jsx(Alert,{variant:notif.type==='success'?'success':'danger',onClose:()=>setNotifications(prev=>prev.filter(n=>n.id!==notif.id)),dismissible:true,children:notif.msg},notif.id)),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Attendance History\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:attendance.map(record=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:new Date(record.date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:record.subject}),/*#__PURE__*/_jsx(\"td\",{children:record.status})]},record._id))})]})]})}),/*#__PURE__*/_jsxs(Modal,{show:showProfileModal,onHide:()=>setShowProfileModal(false),children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Edit Profile\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleProfileUpdate,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:profile.name,onChange:e=>setProfile({...profile,name:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:profile.email,onChange:e=>setProfile({...profile,email:e.target.value}),required:true})]}),/*#__PURE__*/_jsx(Button,{className:\"btn-danger\",type:\"submit\",children:\"Save Changes\"})]})})]})]});}export default StudentDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","Card","Table","Button","Modal","Form","Alert","jsxs","_jsxs","jsx","_jsx","StudentDashboard","_ref","user","setUser","attendance","setAttendance","notifications","setNotifications","profile","setProfile","name","email","showProfileModal","setShowProfileModal","fetchAttendance","res","get","studentId","data","err","_err$response","_err$response$data","addNotification","response","msg","message","type","arguments","length","undefined","prev","id","Date","now","setTimeout","filter","n","handleProfileUpdate","e","preventDefault","put","_id","updatedUser","localStorage","setItem","JSON","stringify","_err$response2","_err$response2$data","className","children","section","variant","onClick","map","notif","onClose","dismissible","Body","Title","striped","bordered","hover","record","date","toLocaleDateString","subject","status","show","onHide","Header","closeButton","onSubmit","Group","Label","Control","value","onChange","target","required"],"sources":["C:/lab/2ndsem/frontendlab/project/attendance-system/client/src/components/StudentDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Card, Table, Button, Modal, Form, Alert } from 'react-bootstrap';\r\n\r\nfunction StudentDashboard({ user, setUser }) {\r\n  const [attendance, setAttendance] = useState([]);\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [profile, setProfile] = useState({ name: user.name, email: user.email });\r\n  const [showProfileModal, setShowProfileModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchAttendance = async () => {\r\n      try {\r\n        const res = await axios.get(`http://localhost:5000/api/attendance?studentId=${user.studentId}`);\r\n        setAttendance(res.data);\r\n      } catch (err) {\r\n        addNotification('Failed to fetch attendance: ' + (err.response?.data?.msg || err.message), 'error');\r\n      }\r\n    };\r\n    fetchAttendance();\r\n  }, [user.studentId]);\r\n\r\n  const addNotification = (msg, type = 'success') => {\r\n    setNotifications((prev) => [...prev, { id: Date.now(), msg, type }]);\r\n    setTimeout(() => {\r\n      setNotifications((prev) => prev.filter((n) => n.id !== Date.now()));\r\n    }, 5000);\r\n  };\r\n\r\n  const handleProfileUpdate = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await axios.put(`http://localhost:5000/api/users/${user._id}`, profile);\r\n      const updatedUser = { ...user, name: profile.name, email: profile.email };\r\n      localStorage.setItem('user', JSON.stringify(updatedUser));\r\n      setUser(updatedUser);\r\n      setShowProfileModal(false);\r\n      addNotification('Profile updated successfully!');\r\n    } catch (err) {\r\n      addNotification('Failed to update profile: ' + (err.response?.data?.msg || err.message), 'error');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard-content\">\r\n      <h2>Welcome, {user.name}</h2>\r\n      <p><strong>Student ID:</strong> {user.studentId}</p>\r\n      <p><strong>Section:</strong> {user.section}</p>\r\n      <Button\r\n        variant=\"secondary\"\r\n        className=\"mb-3\"\r\n        onClick={() => setShowProfileModal(true)}\r\n      >\r\n        Edit Profile\r\n      </Button>\r\n      {notifications.map((notif) => (\r\n        <Alert\r\n          key={notif.id}\r\n          variant={notif.type === 'success' ? 'success' : 'danger'}\r\n          onClose={() => setNotifications((prev) => prev.filter((n) => n.id !== notif.id))}\r\n          dismissible\r\n        >\r\n          {notif.msg}\r\n        </Alert>\r\n      ))}\r\n      <Card>\r\n        <Card.Body>\r\n          <Card.Title>Attendance History</Card.Title>\r\n          <Table striped bordered hover>\r\n            <thead>\r\n              <tr>\r\n                <th>Date</th>\r\n                <th>Subject</th>\r\n                <th>Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {attendance.map((record) => (\r\n                <tr key={record._id}>\r\n                  <td>{new Date(record.date).toLocaleDateString()}</td>\r\n                  <td>{record.subject}</td>\r\n                  <td>{record.status}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n        </Card.Body>\r\n      </Card>\r\n      <Modal show={showProfileModal} onHide={() => setShowProfileModal(false)}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Edit Profile</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form onSubmit={handleProfileUpdate}>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Name</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                value={profile.name}\r\n                onChange={(e) => setProfile({ ...profile, name: e.target.value })}\r\n                required\r\n              />\r\n            </Form.Group>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control\r\n                type=\"email\"\r\n                value={profile.email}\r\n                onChange={(e) => setProfile({ ...profile, email: e.target.value })}\r\n                required\r\n              />\r\n            </Form.Group>\r\n            <Button className=\"btn-danger\" type=\"submit\">\r\n              Save Changes\r\n            </Button>\r\n          </Form>\r\n        </Modal.Body>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StudentDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Form,Button,Table}from'react-bootstrap';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";function FacultyDashboard(_ref){let{user}=_ref;const[classes,setClasses]=useState([]);const[selectedBranch,setSelectedBranch]=useState('');const[selectedSection,setSelectedSection]=useState('');const[students,setStudents]=useState([]);const[attendance,setAttendance]=useState({});useEffect(()=>{const fetchClasses=async()=>{try{const res=await axios.get('/api/classes',{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});setClasses(res.data);}catch(err){console.error(err);}};fetchClasses();},[]);const handleFilter=async()=>{try{const res=await axios.get(`/api/users?branch=${selectedBranch}&section=${selectedSection}`,{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});setStudents(res.data);}catch(err){console.error(err);}};const handleAttendanceChange=(studentId,status)=>{setAttendance({...attendance,[studentId]:status});};const submitAttendance=async()=>{try{for(const[studentId,status]of Object.entries(attendance)){await axios.post('/api/attendance',{studentId,branch:selectedBranch,section:selectedSection,subject:'General',// Can be dynamic later\nstatus},{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});}alert('Attendance submitted');}catch(err){alert('Failed to submit attendance');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",user.name]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"form-group\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Branch\"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",value:selectedBranch,onChange:e=>setSelectedBranch(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Branch\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CSE\",children:\"CSE\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ECE\",children:\"ECE\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ME\",children:\"ME\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"form-group\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Section\"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",value:selectedSection,onChange:e=>setSelectedSection(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Section\"}),/*#__PURE__*/_jsx(\"option\",{value:\"A\",children:\"A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B\",children:\"B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"C\",children:\"C\"})]})]}),/*#__PURE__*/_jsx(Button,{className:\"btn-primary\",onClick:handleFilter,children:\"Filter Students\"})]}),students.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Mark Attendance\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Student Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:students.map(student=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:student.name}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Form.Check,{type:\"radio\",label:\"Present\",name:`attendance-${student._id}`,onChange:()=>handleAttendanceChange(student.studentId,'present')}),/*#__PURE__*/_jsx(Form.Check,{type:\"radio\",label:\"Absent\",name:`attendance-${student._id}`,onChange:()=>handleAttendanceChange(student.studentId,'absent')})]})]},student._id))})]}),/*#__PURE__*/_jsx(Button,{className:\"btn-primary\",onClick:submitAttendance,children:\"Submit Attendance\"})]})]});}export default FacultyDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","Form","Button","Table","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","FacultyDashboard","_ref","user","classes","setClasses","selectedBranch","setSelectedBranch","selectedSection","setSelectedSection","students","setStudents","attendance","setAttendance","fetchClasses","res","get","headers","Authorization","localStorage","getItem","data","err","console","error","handleFilter","handleAttendanceChange","studentId","status","submitAttendance","Object","entries","post","branch","section","subject","alert","className","children","name","Group","Label","Control","as","value","onChange","e","target","onClick","length","striped","bordered","hover","map","student","Check","type","label","_id"],"sources":["C:/lab/2ndsem/frontendlab/project/attendance-system/client/src/components/FacultyDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Form, Button, Table } from 'react-bootstrap';\r\n\r\nfunction FacultyDashboard({ user }) {\r\n  const [classes, setClasses] = useState([]);\r\n  const [selectedBranch, setSelectedBranch] = useState('');\r\n  const [selectedSection, setSelectedSection] = useState('');\r\n  const [students, setStudents] = useState([]);\r\n  const [attendance, setAttendance] = useState({});\r\n\r\n  useEffect(() => {\r\n    const fetchClasses = async () => {\r\n      try {\r\n        const res = await axios.get('/api/classes', {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n        setClasses(res.data);\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    };\r\n    fetchClasses();\r\n  }, []);\r\n\r\n  const handleFilter = async () => {\r\n    try {\r\n      const res = await axios.get(`/api/users?branch=${selectedBranch}&section=${selectedSection}`, {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n      });\r\n      setStudents(res.data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleAttendanceChange = (studentId, status) => {\r\n    setAttendance({ ...attendance, [studentId]: status });\r\n  };\r\n\r\n  const submitAttendance = async () => {\r\n    try {\r\n      for (const [studentId, status] of Object.entries(attendance)) {\r\n        await axios.post(\r\n          '/api/attendance',\r\n          {\r\n            studentId,\r\n            branch: selectedBranch,\r\n            section: selectedSection,\r\n            subject: 'General', // Can be dynamic later\r\n            status\r\n          },\r\n          { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } }\r\n        );\r\n      }\r\n      alert('Attendance submitted');\r\n    } catch (err) {\r\n      alert('Failed to submit attendance');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard-content\">\r\n      <h2>Welcome, {user.name}</h2>\r\n      <div>\r\n        <Form.Group className=\"form-group\">\r\n          <Form.Label>Branch</Form.Label>\r\n          <Form.Control\r\n            as=\"select\"\r\n            value={selectedBranch}\r\n            onChange={(e) => setSelectedBranch(e.target.value)}\r\n          >\r\n            <option value=\"\">Select Branch</option>\r\n            <option value=\"CSE\">CSE</option>\r\n            <option value=\"ECE\">ECE</option>\r\n            <option value=\"ME\">ME</option>\r\n          </Form.Control>\r\n        </Form.Group>\r\n        <Form.Group className=\"form-group\">\r\n          <Form.Label>Section</Form.Label>\r\n          <Form.Control\r\n            as=\"select\"\r\n            value={selectedSection}\r\n            onChange={(e) => setSelectedSection(e.target.value)}\r\n          >\r\n            <option value=\"\">Select Section</option>\r\n            <option value=\"A\">A</option>\r\n            <option value=\"B\">B</option>\r\n            <option value=\"C\">C</option>\r\n          </Form.Control>\r\n        </Form.Group>\r\n        <Button className=\"btn-primary\" onClick={handleFilter}>\r\n          Filter Students\r\n        </Button>\r\n      </div>\r\n      {students.length > 0 && (\r\n        <>\r\n          <h3>Mark Attendance</h3>\r\n          <Table striped bordered hover>\r\n            <thead>\r\n              <tr>\r\n                <th>Student Name</th>\r\n                <th>Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {students.map((student) => (\r\n                <tr key={student._id}>\r\n                  <td>{student.name}</td>\r\n                  <td>\r\n                    <Form.Check\r\n                      type=\"radio\"\r\n                      label=\"Present\"\r\n                      name={`attendance-${student._id}`}\r\n                      onChange={() => handleAttendanceChange(student.studentId, 'present')}\r\n                    />\r\n                    <Form.Check\r\n                      type=\"radio\"\r\n                      label=\"Absent\"\r\n                      name={`attendance-${student._id}`}\r\n                      onChange={() => handleAttendanceChange(student.studentId, 'absent')}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n          <Button className=\"btn-primary\" onClick={submitAttendance}>\r\n            Submit Attendance\r\n          </Button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FacultyDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}